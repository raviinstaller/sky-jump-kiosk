<!doctype html>
<html lang="he" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./assets/styles/main.css" />
    <title>Order Summary</title>
  </head>
  <body>
    <div class="cloud-layer"></div>

    <div class="main">
      <div class="w-full flex flex-col justify-center items-center">
        <div class="app-logo"></div>
        <div class="steps-group step-2">
          <div class="step-item">
            <div class="step-item-number">01</div>
            <div class="step-item-title">מילוי פרטים</div>
          </div>
          <div class="step-item">
            <div class="step-item-number">02</div>
            <div class="step-item-title">בחירת כרטיסים</div>
          </div>
          <div class="step-item">
            <div class="step-item-number">03</div>
            <div class="step-item-title">תשלום</div>
          </div>
          <div class="step-item">
            <div class="step-item-number">04</div>
            <div class="step-item-title">אישור הזמנה</div>
          </div>
        </div>
      </div>
      <h2 class="text-6xl text-color-gradient">סיכום הזמנה</h2>
      <div class="content-container">
        <table class="summary-table">
          <thead>
            <tr>
              <th>פירוט הכרטיסים</th>
              <th>סוג</th>
              <th>כמות הכרטיסים</th>
              <th>מחיר</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>קופץ מעל גיל 6</td>
              <td>קופץ מעל גיל 6</td>
              <td>2</td>
              <td><span>80 ₪</span></td>
            </tr>
            <tr>
              <td>קופץ מעל גיל 6</td>
              <td>גרביים</td>
              <td>2</td>
              <td><span>80 ₪</span></td>
            </tr>
          </tbody>
        </table>
        <div
          class="content-container content-container-white total-container flex-row-reverse justify-between items-center"
        >
          <div class="total-amount">160 ₪</div>
          <div class="total-label">סה"כ לתשלום</div>
        </div>
      </div>
      <div class="content-container">
        <div class="promo-section-container">
          <form class="promo-form">
            <div class="input-wrapper relative">
              <label for="promo-code">קוד הנחה / קופון</label>
              <div class="success_code">
                <input
                  type="text"
                  id="promo-code"
                  class="keyboard-input order-summery-input"
                />
                <p class="success_text">
                  ההנחה נוספה
                  <svg
                    width="34"
                    height="34"
                    viewBox="0 0 34 34"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <rect width="34" height="34" rx="17" fill="#013D6C" />
                    <path
                      d="M14.0002 21.1698L9.83016 16.9998L8.41016 18.4098L14.0002 23.9998L26.0002 11.9998L24.5902 10.5898L14.0002 21.1698Z"
                      fill="white"
                    />
                  </svg>
                </p>
              </div>
            </div>

            <button type="submit" class="orange-submit-btn">הוספה</button>
          </form>
        </div>
      </div>
    </div>
    <div class="footer">
      <div class="footer-shape"></div>
      <div class="btn-box">
        <button class="orange-btn has-left-icon outer-border-left">המשך</button>
        <button class="blue-btn outer-border-right">
          חזרה
          <img
            class="relative z-10"
            src="/assets/images/right-blue-arrow.png"
            alt="left arrow"
          />
        </button>
      </div>
    </div>
    <!-- ================= CUSTOM KEYBOARD ================= -->
    <div class="keyboard-text-container">
      <button class="close-btn" onclick="submitOk()">✕</button>

      <!-- NUMBERS (STATIC - NEVER TOUCHED) -->
      <div class="keyboard-text-row">
        <button class="data-number key" data-key="1">1</button>
        <button class="data-number key" data-key="2">2</button>
        <button class="data-number key" data-key="3">3</button>
        <button class="data-number key" data-key="4">4</button>
        <button class="data-number key" data-key="5">5</button>
        <button class="data-number key" data-key="6">6</button>
        <button class="data-number key" data-key="7">7</button>
        <button class="data-number key" data-key="8">8</button>
        <button class="data-number key" data-key="9">9</button>
        <button class="data-number key" data-key="0">0</button>
      </div>

      <!-- LETTER ROW 1 -->
      <div class="keyboard-text-row lang-row">
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
      </div>

      <!-- LETTER ROW 2 -->
      <div class="keyboard-text-row lang-row">
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
      </div>

      <!-- LETTER ROW 3 -->
      <div class="keyboard-text-row lang-row">
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
      </div>

      <!-- ACTIONS -->
      <div class="keyboard-text-row actions">
        <button class="data-number" onclick="toggleLang()">🌐</button>

        <button class="data-number data-space" onclick="addCharX(' ')"></button>

        <button class="data-number data-delete" onclick="deleteChar()">
          ⌫
        </button>

        <button class="data-number data-ok" onclick="submitOk()">שמירה</button>
      </div>
    </div>
    <script>
      (function () {
        let currentInput = null;
        let currentLang = "he";

        const keyboard = document.querySelector(".keyboard-text-container");
        const allInputs = document.querySelectorAll(".keyboard-input");

        const layouts = {
          he: [
            ["ק", "ר", "א", "ט", "ו", "ן", "ם", "פ"],
            ["ש", "ד", "ג", "כ", "ע", "י", "ח", "ל", "ך", "ף"],
            ["ז", "ס", "ב", "ה", "נ", "מ", "צ", "ת", "ץ"],
          ],
          en: [
            ["q", "w", "e", "r", "t", "y", "u", "i", "o", "p"],
            ["a", "s", "d", "f", "g", "h", "j", "k", "l", "@"],
            ["z", "x", "c", "v", "b", "n", "m", ".", "_", "-"],
          ],
        };

        function renderKeys() {
          const rows = document.querySelectorAll(".lang-row");
          const layout = layouts[currentLang];

          rows.forEach((row, rowIndex) => {
            const buttons = row.querySelectorAll(".key");
            const rowKeys = layout[rowIndex] || [];

            buttons.forEach((btn, i) => {
              const val = rowKeys[i] || "";
              btn.textContent = val;
              btn.dataset.key = val;
              btn.onclick = () => addCharX(val);
            });
          });
        }

        window.toggleLang = function () {
          currentLang = currentLang === "he" ? "en" : "he";
          renderKeys();
        };

        function showKeyboard(input) {
          currentInput = input;
          keyboard.classList.add("is-open");
          renderKeys();
          moveCaretToEnd(input);
        }

        function hideKeyboard() {
          keyboard.classList.remove("is-open");
          currentInput = null;
        }

        function moveCaretToEnd(input) {
          input.focus();
          const val = input.value;
          input.value = "";
          input.value = val;
        }

        window.addCharX = function (val) {
          if (!currentInput || !val) return;
          currentInput.value += val;
          moveCaretToEnd(currentInput);
        };

        window.deleteChar = function () {
          if (!currentInput) return;
          currentInput.value = currentInput.value.slice(0, -1);
          moveCaretToEnd(currentInput);
        };

        window.submitOk = function () {
          hideKeyboard();
        };

        allInputs.forEach((input) => {
          input.addEventListener("focus", () => showKeyboard(input));
          input.addEventListener("click", () => showKeyboard(input));
        });
      })();
    </script>
  </body>
</html>
