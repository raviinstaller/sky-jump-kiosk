<!doctype html>
<html lang="he" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./assets/styles/main.css" />
    <title>Club Details</title>
  </head>

  <body>
    <div class="main">
      <div class="w-full flex flex-col justify-center items-center">
        <div class="app-logo"></div>
        <div class="steps-group step-2">
          <div class="step-item">
            <div class="step-item-number">01</div>
            <div class="step-item-title">מילוי פרטים</div>
          </div>
          <div class="step-item">
            <div class="step-item-number">02</div>
            <div class="step-item-title">בחירת כרטיסים</div>
          </div>
          <div class="step-item">
            <div class="step-item-number">03</div>
            <div class="step-item-title">תשלום</div>
          </div>
          <div class="step-item">
            <div class="step-item-number">04</div>
            <div class="step-item-title">אישור הזמנה</div>
          </div>
        </div>
      </div>
      <h2 class="text-6xl text-color-gradient">מימוש מועדונים</h2>
      <div class="content-container">
        <div>
          <h2 class="text-white text-2xl">
            נא לסרוק את הברקוד, או להזין את מספר
          </h2>
          <h2
            class="text-white text-2xl flex justify-center flex-row-reverse gap-4 mt-3"
          >
            <div class="tooltip-wrapper">
              <svg
                width="49"
                height="49"
                viewBox="0 0 49 49"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <ellipse cx="25" cy="24.5" rx="16" ry="17.5" fill="white" />
                <path
                  d="M24.4987 4.08301C13.2287 4.08301 4.08203 13.2297 4.08203 24.4997C4.08203 35.7697 13.2287 44.9163 24.4987 44.9163C35.7687 44.9163 44.9154 35.7697 44.9154 24.4997C44.9154 13.2297 35.7687 4.08301 24.4987 4.08301ZM24.4987 34.708C23.3758 34.708 22.457 33.7893 22.457 32.6663V24.4997C22.457 23.3768 23.3758 22.458 24.4987 22.458C25.6216 22.458 26.5404 23.3768 26.5404 24.4997V32.6663C26.5404 33.7893 25.6216 34.708 24.4987 34.708ZM26.5404 18.3747H22.457V14.2913H26.5404V18.3747Z"
                  fill="#FF9800"
                />
              </svg>

              <div class="tooltip-content">
                <div class="tooltip-title">דוגמאות למספרי מועדונים</div>
                <ul class="tooltip-numbers">
                  <li>1280181012</li>
                  <li>1280181012</li>
                  <li>1280181012</li>
                  <li>1280181012</li>
                </ul>
              </div>
            </div>
            כרטיס החבר / קוד ההטבה
          </h2>
        </div>
        <div class="promo-section-container">
          <form class="promo-form">
            <div class="input-wrapper">
              <input
                type="text"
                class="keyboard-input order-summery-input"
                id="promo-code"
                placeholder="הזן כאן את מספר הכרטיס "
              />
            </div>
          </form>
        </div>
      </div>
    </div>
    <div class="footer">
      <div class="footer-shape"></div>
      <div class="btn-box">
        <button class="orange-btn has-left-icon outer-border-left">המשך</button>
        <button class="blue-btn outer-border-right">
          חזרה
          <img
            class="relative z-10"
            src="/assets/images/right-blue-arrow.png"
            alt="left arrow"
          />
        </button>
      </div>
    </div>
    <!-- ================= CUSTOM KEYBOARD ================= -->
    <div class="keyboard-text-container">
      <button class="close-btn" onclick="submitOk()">✕</button>

      <!-- NUMBERS (STATIC - NEVER TOUCHED) -->
      <div class="keyboard-text-row">
        <button class="data-number key" data-key="1">1</button>
        <button class="data-number key" data-key="2">2</button>
        <button class="data-number key" data-key="3">3</button>
        <button class="data-number key" data-key="4">4</button>
        <button class="data-number key" data-key="5">5</button>
        <button class="data-number key" data-key="6">6</button>
        <button class="data-number key" data-key="7">7</button>
        <button class="data-number key" data-key="8">8</button>
        <button class="data-number key" data-key="9">9</button>
        <button class="data-number key" data-key="0">0</button>
      </div>

      <!-- LETTER ROW 1 -->
      <div class="keyboard-text-row lang-row">
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
      </div>

      <!-- LETTER ROW 2 -->
      <div class="keyboard-text-row lang-row">
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
      </div>

      <!-- LETTER ROW 3 -->
      <div class="keyboard-text-row lang-row">
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
      </div>

      <!-- ACTIONS -->
      <div class="keyboard-text-row actions">
        <button class="data-number" onclick="toggleLang()">🌐</button>

        <button class="data-number data-space" onclick="addCharX(' ')"></button>

        <button class="data-number data-delete" onclick="deleteChar()">
          ⌫
        </button>

        <button class="data-number data-ok" onclick="submitOk()">שמירה</button>
      </div>
    </div>

    <!-- ================= SCRIPT ================= -->
    <script>
      (function () {
        let currentInput = null;
        let currentLang = "he";

        const keyboard = document.querySelector(".keyboard-text-container");
        const allInputs = document.querySelectorAll(".keyboard-input");

        const layouts = {
          he: [
            ["ק", "ר", "א", "ט", "ו", "ן", "ם", "פ"],
            ["ש", "ד", "ג", "כ", "ע", "י", "ח", "ל", "ך", "ף"],
            ["ז", "ס", "ב", "ה", "נ", "מ", "צ", "ת", "ץ"],
          ],
          en: [
            ["q", "w", "e", "r", "t", "y", "u", "i", "o", "p"],
            ["a", "s", "d", "f", "g", "h", "j", "k", "l", "@"],
            ["z", "x", "c", "v", "b", "n", "m", ".", "_", "-"],
          ],
        };

        function renderKeys() {
          const rows = document.querySelectorAll(".lang-row");
          const layout = layouts[currentLang];

          rows.forEach((row, rowIndex) => {
            const buttons = row.querySelectorAll(".key");
            const rowKeys = layout[rowIndex] || [];

            buttons.forEach((btn, i) => {
              const val = rowKeys[i] || "";
              btn.textContent = val;
              btn.dataset.key = val;
              btn.onclick = () => addCharX(val);
            });
          });
        }

        window.toggleLang = function () {
          currentLang = currentLang === "he" ? "en" : "he";
          renderKeys();
        };

        function showKeyboard(input) {
          currentInput = input;
          keyboard.classList.add("is-open");

          if (input.type === "email") {
            currentLang = "en";
          } else {
            currentLang = "he";
          }

          renderKeys();
          moveCaretToEnd(input);
        }

        function hideKeyboard() {
          keyboard.classList.remove("is-open");

          if (currentInput.type === "email") {
            currentLang = "he";
          }

          if (currentInput) currentInput.blur();

          currentInput = null;
        }

        function moveCaretToEnd(input) {
          input.focus();
          const val = input.value;
          input.value = "";
          input.value = val;
        }

        window.addCharX = function (val) {
          if (!currentInput || !val) return;
          currentInput.value += val;
          moveCaretToEnd(currentInput);
        };

        window.deleteChar = function () {
          if (!currentInput) return;
          currentInput.value = currentInput.value.slice(0, -1);
          moveCaretToEnd(currentInput);
        };

        window.submitOk = function () {
          hideKeyboard();
        };

        allInputs.forEach((input) => {
          input.addEventListener("focus", () => showKeyboard(input));
          input.addEventListener("click", () => showKeyboard(input));
        });
      })();
    </script>
  </body>
</html>
