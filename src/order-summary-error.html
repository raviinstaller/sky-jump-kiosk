<!doctype html>
<html lang="he" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./assets/styles/main.css" />
    <title>Order Summary</title>
  </head>
  <body>
    <div class="cloud-layer"></div>

    <div class="main">
      <div class="w-full flex flex-col justify-center items-center">
        <div class="app-logo"></div>
        <div class="steps-group step-2">
          <div class="step-item">
            <div class="step-item-number">01</div>
            <div class="step-item-title">מילוי פרטים</div>
          </div>
          <div class="step-item">
            <div class="step-item-number">02</div>
            <div class="step-item-title">בחירת כרטיסים</div>
          </div>
          <div class="step-item">
            <div class="step-item-number">03</div>
            <div class="step-item-title">תשלום</div>
          </div>
          <div class="step-item">
            <div class="step-item-number">04</div>
            <div class="step-item-title">אישור הזמנה</div>
          </div>
        </div>
      </div>
      <h2 class="text-6xl text-color-gradient">סיכום הזמנה</h2>
      <div class="content-container">
        <table class="summary-table">
          <thead>
            <tr>
              <th>פירוט הכרטיסים</th>
              <th>סוג</th>
              <th>כמות הכרטיסים</th>
              <th>מחיר</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>קופץ מעל גיל 6</td>
              <td>קופץ מעל גיל 6</td>
              <td>2</td>
              <td><span>80 ₪</span></td>
            </tr>
            <tr>
              <td>קופץ מעל גיל 6</td>
              <td>גרביים</td>
              <td>2</td>
              <td><span>80 ₪</span></td>
            </tr>
          </tbody>
        </table>
        <div
          class="content-container content-container-white total-container flex-row-reverse justify-between items-center"
        >
          <div class="total-amount">160 ₪</div>
          <div class="total-label">סה"כ לתשלום</div>
        </div>
      </div>
      <div class="content-container">
        <div class="promo-section-container">
          <form class="promo-form">
            <div class="input-wrapper relative">
              <label for="promo-code">קוד הנחה / קופון</label>
              <div class="error_code">
                <input
                  type="text"
                  id="promo-code"
                  class="keyboard-input order-summery-input text-sm"
                />
                <p class="error_text">
                  קוד הנחה לא תקין<svg
                    width="32"
                    height="32"
                    viewBox="0 0 32 32"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M17.1803 3.37568C16.719 2.50368 15.2843 2.50368 14.823 3.37568L2.823 26.0423C2.71538 26.2456 2.66215 26.4731 2.66847 26.703C2.67479 26.9329 2.74046 27.1572 2.85908 27.3542C2.9777 27.5512 3.14525 27.7141 3.34546 27.8272C3.54566 27.9403 3.77172 27.9997 4.00166 27.9997H28.0017C28.2316 28.0002 28.4577 27.941 28.658 27.8281C28.8583 27.7152 29.0259 27.5522 29.1445 27.3552C29.2631 27.1582 29.3286 26.9339 29.3346 26.704C29.3407 26.4741 29.2871 26.2466 29.179 26.0437L17.1803 3.37568ZM17.335 23.9997H14.6683V21.333H17.335V23.9997ZM14.6683 18.6663V11.9997H17.335L17.3363 18.6663H14.6683Z"
                      fill="#EE1C1C"
                    />
                  </svg>
                </p>
              </div>
            </div>

            <button type="submit" class="orange-submit-btn">הוספה</button>
          </form>
        </div>
      </div>
    </div>
    <div class="footer">
      <div class="footer-shape"></div>
      <div class="btn-box">
        <button class="orange-btn has-left-icon outer-border-left">המשך</button>
        <button class="blue-btn outer-border-right">
          חזרה
          <img
            class="relative z-10"
            src="/assets/images/right-blue-arrow.png"
            alt="left arrow"
          />
        </button>
      </div>
    </div>
    <!-- ================= CUSTOM KEYBOARD ================= -->
    <div class="keyboard-text-container">
      <button class="close-btn" onclick="submitOk()">✕</button>

      <!-- NUMBERS (STATIC - NEVER TOUCHED) -->
      <div class="keyboard-text-row">
        <button class="data-number key" data-key="1">1</button>
        <button class="data-number key" data-key="2">2</button>
        <button class="data-number key" data-key="3">3</button>
        <button class="data-number key" data-key="4">4</button>
        <button class="data-number key" data-key="5">5</button>
        <button class="data-number key" data-key="6">6</button>
        <button class="data-number key" data-key="7">7</button>
        <button class="data-number key" data-key="8">8</button>
        <button class="data-number key" data-key="9">9</button>
        <button class="data-number key" data-key="0">0</button>
      </div>

      <!-- LETTER ROW 1 -->
      <div class="keyboard-text-row lang-row">
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
      </div>

      <!-- LETTER ROW 2 -->
      <div class="keyboard-text-row lang-row">
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
      </div>

      <!-- LETTER ROW 3 -->
      <div class="keyboard-text-row lang-row">
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
        <button class="data-number key"></button>
      </div>

      <!-- ACTIONS -->
      <div class="keyboard-text-row actions">
        <button class="data-number" onclick="toggleLang()">🌐</button>

        <button class="data-number data-space" onclick="addCharX(' ')"></button>

        <button class="data-number data-delete" onclick="deleteChar()">
          ⌫
        </button>

        <button class="data-number data-ok" onclick="submitOk()">שמירה</button>
      </div>
    </div>
    <!-- ================= SCRIPT ================= -->
    <script>
      (function () {
        let currentInput = null;
        let currentLang = "he";

        const keyboard = document.querySelector(".keyboard-text-container");
        const allInputs = document.querySelectorAll(".keyboard-input");

        const layouts = {
          he: [
            ["ק", "ר", "א", "ט", "ו", "ן", "ם", "פ"],
            ["ש", "ד", "ג", "כ", "ע", "י", "ח", "ל", "ך", "ף"],
            ["ז", "ס", "ב", "ה", "נ", "מ", "צ", "ת", "ץ"],
          ],
          en: [
            ["q", "w", "e", "r", "t", "y", "u", "i", "o", "p"],
            ["a", "s", "d", "f", "g", "h", "j", "k", "l", "@"],
            ["z", "x", "c", "v", "b", "n", "m", ".", "_", "-"],
          ],
        };

        function renderKeys() {
          const rows = document.querySelectorAll(".lang-row");
          const layout = layouts[currentLang];

          rows.forEach((row, rowIndex) => {
            const buttons = row.querySelectorAll(".key");
            const rowKeys = layout[rowIndex] || [];

            buttons.forEach((btn, i) => {
              const val = rowKeys[i] || "";
              btn.textContent = val;
              btn.dataset.key = val;
              btn.onclick = () => addCharX(val);
            });
          });
        }

        window.toggleLang = function () {
          currentLang = currentLang === "he" ? "en" : "he";
          renderKeys();
        };

        function showKeyboard(input) {
          currentInput = input;
          keyboard.classList.add("is-open");

          if (input.type === "email") {
            currentLang = "en";
          } else {
            currentLang = "he";
          }

          renderKeys();
          moveCaretToEnd(input);
        }

        function hideKeyboard() {
          keyboard.classList.remove("is-open");

          if (currentInput.type === "email") {
            currentLang = "he";
          }

          if (currentInput) currentInput.blur();

          currentInput = null;
        }

        function moveCaretToEnd(input) {
          input.focus();
          const val = input.value;
          input.value = "";
          input.value = val;
        }

        window.addCharX = function (val) {
          if (!currentInput || !val) return;
          currentInput.value += val;
          moveCaretToEnd(currentInput);
        };

        window.deleteChar = function () {
          if (!currentInput) return;
          currentInput.value = currentInput.value.slice(0, -1);
          moveCaretToEnd(currentInput);
        };

        window.submitOk = function () {
          hideKeyboard();
        };

        allInputs.forEach((input) => {
          input.addEventListener("focus", () => showKeyboard(input));
          input.addEventListener("click", () => showKeyboard(input));
        });
      })();
    </script>
  </body>
</html>
